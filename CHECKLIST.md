# 发布前检查清单 / Pre-Release Checklist

## 📋 代码质量检查

- [ ] 所有 PHP 代码符合 PSR-12 标准
- [ ] 所有 JavaScript 代码通过 ESLint 检查
- [ ] 没有调试代码（console.log, var_dump 等）
- [ ] 代码注释完整且准确
- [ ] 错误处理完善

## 🧪 功能测试

- [ ] 基本功能测试
  - [ ] 安装扩展成功
  - [ ] 启用扩展成功
  - [ ] 管理面板设置可访问
  - [ ] 设置保存成功
  
- [ ] 核心功能测试
  - [ ] 达到阈值时讨论自动锁定
  - [ ] 已锁定的讨论不受影响
  - [ ] 禁用功能时不自动锁定
  - [ ] 修改阈值后立即生效
  
- [ ] 边界测试
  - [ ] 阈值设为 1 时正常工作
  - [ ] 阈值设为很大的数字时正常工作
  - [ ] 并发发帖时不出现竞态条件

## 🌍 多语言测试

- [ ] 英文界面显示正常
- [ ] 中文界面显示正常
- [ ] 所有文本都已翻译
- [ ] 没有硬编码的文本

## 📚 文档检查

- [ ] README.md 完整且准确
- [ ] README_ZH.md 完整且准确
- [ ] CHANGELOG.md 更新
- [ ] CONTRIBUTING.md 清晰易懂
- [ ] PUBLISH.md 步骤正确
- [ ] LICENSE 文件存在
- [ ] 所有示例代码可运行

## 🔧 配置文件检查

- [ ] composer.json 信息正确
  - [ ] 包名正确
  - [ ] 版本号正确
  - [ ] 依赖版本正确
  - [ ] 作者信息完整
  
- [ ] package.json 信息正确
  - [ ] 包名正确
  - [ ] 版本号与 composer.json 一致
  - [ ] 脚本命令可用
  
- [ ] .gitignore 配置合理
- [ ] .editorconfig 配置正确

## 🏗️ 构建检查

- [ ] `composer install` 成功
- [ ] `npm install` 成功
- [ ] `npm run build` 成功
- [ ] 构建产物正确生成在 `js/dist/`
- [ ] 没有构建警告或错误

## 🔒 安全检查

- [ ] 没有硬编码的密钥或密码
- [ ] 用户输入已正确验证
- [ ] SQL 注入防护
- [ ] XSS 防护
- [ ] CSRF 防护（Flarum 自带）

## 📦 版本控制

- [ ] 所有更改已提交
- [ ] 提交信息清晰明确
- [ ] 创建了版本标签
- [ ] 标签版本号正确

## 🚀 发布准备

- [ ] GitHub 仓库创建
- [ ] 代码推送到 GitHub
- [ ] Release 创建
- [ ] Release 说明完整
- [ ] Packagist 提交准备就绪

## ✅ 兼容性检查

- [ ] Flarum 1.0+ 兼容
- [ ] PHP 7.4+ 兼容
- [ ] PHP 8.0+ 兼容
- [ ] PHP 8.1+ 兼容
- [ ] PHP 8.2+ 兼容

## 📊 性能检查

- [ ] 没有 N+1 查询问题
- [ ] 数据库查询优化
- [ ] 没有内存泄漏
- [ ] 响应时间合理

## 🎨 用户体验

- [ ] 管理界面友好
- [ ] 设置项说明清晰
- [ ] 错误提示有帮助
- [ ] 没有破坏性更改（如果是更新版本）

## 📝 最后检查

- [ ] 版本号在所有文件中一致
- [ ] 日期在 CHANGELOG.md 中正确
- [ ] 所有 TODO 已完成或移除
- [ ] 团队成员已审查（如果有）

---

✨ **全部完成后即可发布！**